<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Google-Bewertungen – Antwortgenerator</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 900px; margin: 40px auto; padding: 0 16px; }
    h1 { font-size: 34px; margin: 0 0 10px; }
    p { margin: 0 0 16px; color: #333; }
    textarea { width: 100%; min-height: 160px; padding: 12px; font-size: 16px; }
    button { margin-top: 12px; padding: 10px 14px; font-size: 16px; cursor: pointer; }
    .box { margin-top: 18px; padding: 12px; border: 1px solid #ddd; background: #fafafa; white-space: pre-wrap; }
    .small { color: #666; font-size: 13px; margin-top: 6px; }
    select {
  margin-top: 6px;
  padding: 8px;
  font-size: 16px;
}
  </style>
</head>
<body>
  <h1>Automatische Antworten auf Google-Bewertungen</h1>
  <p>Kopiere eine Google-Bewertung hinein und erhalte sofort eine professionelle Antwort.</p>

  <label for="review"><b>Bewertung</b></label>
  <textarea id="review" placeholder="Hier Google-Bewertung einfügen..."></textarea>

  <label for="tone"><b>Tonalität</b></label>
<select id="tone">
  <option value="professionell" selected>Professionell</option>
  <option value="kurz">Kurz</option>
  <option value="locker">Locker</option>
</select>
  <br />

<label for="lang"><b>Sprache</b></label>
<select id="lang">
  <option value="de" selected>Deutsch</option>
  <option value="en">Englisch</option>
</select>

  <br />
  <button id="generateBtn">Antwort generieren</button>
  <div class="small" id="status"></div>

  <h3>Antwort</h3>
  <div class="box" id="result">Hier erscheint die Antwort der KI.</div>
<button id="copyBtn">Antwort kopieren</button>
<div id="copyStatus" class="small"></div>
<script>
const toneEl = document.getElementById("tone");
const API_URL = "/api/generate";
const langEl = document.getElementById("lang");

const btn = document.getElementById("generateBtn");
const reviewEl = document.getElementById("review");
const resultEl = document.getElementById("result");
const statusEl = document.getElementById("status");

const copyBtn = document.getElementById("copyBtn");
const copyStatus = document.getElementById("copyStatus");

// Copy-Button am Anfang deaktivieren
copyBtn.disabled = true;

btn.addEventListener("click", async () => {
  const review = reviewEl.value.trim();
  const tone = toneEl.value;
const lang = langEl.value;
  if (!review) {
    resultEl.textContent = "Bitte zuerst eine Bewertung eingeben.";
    copyBtn.disabled = true;
    return;
  }

  btn.disabled = true;
  statusEl.textContent = "Generiere Antwort...";
  resultEl.textContent = "";

  try {
        const res = await fetch(API_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ review, tone, lang })
    });
    

    const data = await res.json();

    const reply =
      (data.reply && String(data.reply).trim()) ||
      (data.text && String(data.text).trim()) ||
      "";

    if (!reply) {
      resultEl.textContent = "Keine Antwort erhalten.";
      copyBtn.disabled = true;
    } else {
      resultEl.textContent = reply;
      copyBtn.disabled = false;
    }
  } catch (e) {
    resultEl.textContent = "Netzwerkfehler";
    copyBtn.disabled = true;
  } finally {
    btn.disabled = false;
    statusEl.textContent = "";
  }
});

copyBtn.addEventListener("click", async () => {
  const text = (resultEl.textContent || "").trim();

  if (!text || text === "Hier erscheint die Antwort der KI.") {
    copyStatus.textContent = "Noch keine Antwort zum Kopieren.";
    return;
  }

  try {
    await navigator.clipboard.writeText(text);
    copyStatus.textContent = "Kopiert!";
    setTimeout(() => (copyStatus.textContent = ""), 1500);
  } catch (e) {
    copyStatus.textContent = "Kopieren hat nicht geklappt. Markiere den Text manuell.";
  }
});
</script>
</body>
</html>


